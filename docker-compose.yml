version: "3.9"

services:
  server:
    build:
      context: ./server
      dockerfile: Dockerfile
    container_name: profile-intake-server
    ports:
      - "8000:8000"
    env_file:
      - ./.env
    environment:
      # In-container paths (override if your Settings expects these)
      UPLOAD_DIR: /data/uploads
      DATABASE_URL: sqlite:////data/data.db
    volumes:
      # Persist uploads + SQLite DB on the host
      - ./server/.data:/data
    restart: unless-stopped
